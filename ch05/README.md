#第 5 章  TCP客户/服务器程序示例


###1. 处理SIGCHLD信号

> 子进程退出后，内核会发送一个SIGCHLD信号给父进程，该信号的默认是忽略，那么子进程会成为**僵尸进程**并占用系统资源，如进程ID，终止状态以及资源利用信息等。所以我们应该通过*signal函数(sigaction函数更好)*设定信号处理函数去释放子进程占用的资源，比如在该处理函数中调用wait或waitpid函数等方法解决该问题。


###2. 处理被中断的系统调用

> *1*中虽然处理了SIGCHLD信号，但是父进程捕获该信号会导致**慢系统调用（accept）中断**，有些系统默认自动重启系统调用，有些系统不默认自动重启，所以可以通过**sigaction函数(signal函数不可以)**设定SA_RESTART来由内核自动重启中断。但是由于标准不一，有点系统**没有SA_RESTART标志**，我们可以通过判断错误码是否为EINTR,若是，则再次重新调用该系统中断。这种方法对于accept、read、write、select、open之类的函数来说是有用的，但是对于connect不能重启，必须调用select来等待连接完成，因为TCP的三次握手还在继续进行。




